<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript Function bind()</title>
  </head>
  <body>
    <h2>JavaScript Function bind()</h2>
    <h3>
      The bind() method in JavaScript is used to create a new function with a
      specified this value and initial arguments. It doesn't call the function
      immediately but rather returns a new function that, when called, has its
      this keyword set to the provided value, with a given sequence of arguments
      preceding any provided when the new function is called.
    </h3>
    <h4>
      We use bind() to create a new function boundFunction, where this inside
      the function will refer to the person object, and we pass 'Hello' as the
      first argument.
    </h4>
    <p>
      Function Borrowing<br />
      With the bind() method, an object can borrow a method from another
      object.<br />

      The example below creates 2 objects (person and member).<br />

      The member object borrows the fullname method from the person object:<br />
    </p>
    <h2>
      Preserving this....<br />
      Sometimes the bind() method has to be used to prevent losing this.
    </h2>
    <h3>In This example the person name will display after 3 seconds:<br /></h3>
    <h1 id="demo">Name Searching......</h1>
    <script>
      // Example 1.......
      const person = {
        firstName: "Sahil",
        lastName: "Salam",
        fullName: function (city, state, country) {
          return (
            this.firstName +
            " " +
            this.lastName +
            " from " +
            city +
            "-" +
            state +
            "," +
            country
          );
        },
      };

      const member = {
        firstName: "Amir",
        lastName: "Salam",
      };

      let fullName = person.fullName.bind(member, "Nawada", "Bihar", "India");
      console.log(fullName());

      //Example 2.......with Argument
      //       const person = {
      //   firstName: 'Sahil',
      //   lastName: 'Salam',
      // };

      // function greet(greeting) {
      //   console.log(`${greeting}, ${this.firstName} ${this.lastName}`);
      // }

      // const boundFunction = greet.bind(person, 'Hello');
      // boundFunction(); // Output: Hello, Sahil Salam

      // Example-3........
      // Preserving this
      // Sometimes the bind() method has to be used to prevent losing this.
      // const person = {
      //   firstName:"John",
      //   lastName: "Doe",
      //   display: function () {
      //     let x = document.getElementById("demo");
      //     x.innerHTML = this.firstName + " " + this.lastName;
      //   }
      // }

      // setTimeout(person.display, 3000);

      // When a function is used as a callback, this is lost.

      // This example will try to display the person name after 3 seconds, but it will display undefined instead:

      // Solution using bind()..............................
      // The bind() method solves this problem.

      // In the following example, the bind() method is used to bind person.display to person.

      // This example will display the person name after 3 seconds:

      const person1 = {
        firstName: "Amir",
        lastName: "Salam",
        display: function () {
          let x = document.getElementById("demo");
          x.innerHTML = this.firstName + " " + this.lastName;
        },
      };

      let display = person1.display.bind(person1);
      setTimeout(display, 3000);
    </script>
  </body>
</html>
