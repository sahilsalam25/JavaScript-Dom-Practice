<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>async & await</title>
  </head>
  <body>
    <h1>
      Async/Await is the extension of promises that we get as support in the
      language.<br />

      What is Async Function ? Async simply allows us to write promises-based
      code as if it was synchronous and it checks that we are not breaking the
      execution thread.
      <br />
      Async functions will always return a value. It makes sure that a promise
      is returned and if it is not returned then JavaScript automatically wraps
      it in a promise which is resolved with its value.
    </h1>
    <h2>
      <b> What is Await Function ?</b>
      Await function is used to wait for the promise. It could be used within
      the async block only. It makes the code wait until the promise returns a
      result.
    </h2>
    <script>
      // Method--- Using the async & await method... Changing the h1's text color after 1 second...
      let h1 = document.querySelector("h1");
      let h2 = document.querySelector("h2");
      function changeColor(color, delay) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            h1.style.color = color;
            //     h2.innerText = `Using the Promise Method...... Changing the h2's text color after some
            // seconds...`;
            h2.style.color = color;
            console.log(`color changed to ${color}`);

            resolve("Color Changed.......!");
          }, delay);
        });
      }
      // without using the await...
      //   async function demo() {
      //     changeColor("green", 1000);
      //     changeColor("yellow", 1200);
      //     changeColor("red", 1500);
      //     changeColor("purple", 1800);
      //     changeColor("blue", 2000);
      //   }
      //   demo();
      // with using the await...
      async function demo() {
        await changeColor("green", 1000);
        await changeColor("yellow", 1200);
        await changeColor("red", 1500);
        await changeColor("purple", 1800);
        changeColor("blue", 2000);
      }
      demo();

      // optional want to check promise state...
      //   let request = changeColor("green", 1500);
      //   console.log(request);
      // optional want to check promise state...
      //   changeColor("green", 1500)
      //     .then(() => {
      //       console.log("Green Color Completed...!");
      //       return changeColor("yellow", 1800);
      //     })
      //     .then(() => {
      //       console.log("Yellow Color Completed...!");
      //       return changeColor("blue", 2000);
      //     })
      //     .then(() => {
      //       console.log("Blue Color Completed...!");
      //       return changeColor("aqua", 2300);
      //     })
      //     .then(() => {
      //       console.log("Aqua Color Completed...!");
      //       return changeColor("purple", 2600);
      //     })
      //     .then(() => {
      //       console.log("Purple Color Completed...!");
      //     });
    </script>
  </body>
</html>
