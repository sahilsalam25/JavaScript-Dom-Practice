<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- <h1>demo</h1> -->
    <h1>
      Async/Await is the extension of promises that we get as support in the
      language.<br />

      What is Async Function ? Async simply allows us to write promises-based
      code as if it was synchronous and it checks that we are not breaking the
      execution thread.
      <br />
      Async functions will always return a value. It makes sure that a promise
      is returned and if it is not returned then JavaScript automatically wraps
      it in a promise which is resolved with its value.
    </h1>
    <h2>
      <b> What is Await Function ?</b>
      Await function is used to wait for the promise. It could be used within
      the async block only. It makes the code wait until the promise returns a
      result.
    </h2>
    <script>
      let h1 = document.querySelector("h1");
      let h2 = document.querySelector("h2");
      function changeColor(color, delay) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            let num = Math.floor(Math.random() * 6) + 1;
            if (num > 3) {
              reject("promise rejected.......!");
            }
            h1.style.color = color;
            //     h2.innerText = `Using the Promise Method...... Changing the h2's text color after some
            // seconds...`;
            h2.style.color = color;
            console.log(`color changed to ${color}`);

            resolve("Color Changed.......!");
          }, delay);
        });
      }
      // without using the await...
      //   async function demo() {
      //     changeColor("green", 1000);
      //     changeColor("yellow", 1200);
      //     changeColor("red", 1500);
      //     changeColor("purple", 1800);
      //     changeColor("blue", 2000);
      //   }
      //   demo();
      // with using the await...
      async function demo() {
        try {
          await changeColor("green", 1000);
          await changeColor("yellow", 1200);
          await changeColor("red", 1500);
          await changeColor("purple", 1800);
          await changeColor("blue", 2000);
        } catch (error) {
          console.log("Error is found....", error);
        }
      }
      demo();
    </script>
  </body>
</html>
